<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Операция «Сейф» — Киберквест</title>
  <style>
    :root {
      --bg-gradient: radial-gradient(circle at 20% 20%, #1a1a2f 0%, #0a0a12 70%);
      --panel-bg: rgba(34,34,51,.6);
      --panel-border: rgba(255,255,255,.07);
      --accent: #8a6bff;
      --accent-soft: rgba(138,107,255,.12);
      --text-main:#fff;
      --text-dim:#9ca3c7;
      --good:#31d158;
      --bad:#ff0048;
      --radius-xl:1.25rem;
      --radius-lg:.75rem;
      --radius-full:999px;
      --font-stack:"Inter", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", sans-serif;
    }

    *{box-sizing:border-box;-webkit-font-smoothing:antialiased;}
    body{
      margin:0;
      min-height:100vh;
      background:var(--bg-gradient);
      color:var(--text-main);
      font-family:var(--font-stack);
      line-height:1.5;
      display:flex;
      flex-direction:column;
    }

    header{
      padding:2rem 1rem 1rem;
      max-width:1200px;
      width:100%;
      margin:0 auto;
      display:grid;
      gap:1rem;
    }
    .badge-row{
      display:flex;
      flex-wrap:wrap;
      gap:.5rem .75rem;
      font-size:.8rem;
      color:var(--text-dim);
    }
    .badge{
      background:var(--accent-soft);
      color:var(--accent);
      border:1px solid var(--accent);
      border-radius:var(--radius-full);
      padding:.4rem .75rem;
      font-weight:500;
      font-size:.75rem;
      line-height:1.2;
      white-space:nowrap;
    }
    h1{
      margin:0;
      display:flex;
      flex-wrap:wrap;
      align-items:center;
      gap:.75rem;
      font-size:clamp(1.5rem,2vw,2rem);
      font-weight:600;
      color:var(--text-main);
    }
    h1 .mark{
      background:var(--accent-soft);
      color:var(--accent);
      border:1px solid var(--accent);
      border-radius:var(--radius-full);
      padding:.4rem .75rem;
      font-size:.8rem;
      line-height:1.2;
      font-weight:500;
    }
    .subtitle{
      font-size:1rem;
      color:var(--text-dim);
      max-width:60ch;
    }

    .intro-box{
      background:rgba(0,0,0,.3);
      border:1px solid rgba(255,255,255,.07);
      border-radius:var(--radius-xl);
      box-shadow:0 30px 80px rgba(0,0,0,.6);
      padding:1rem 1.25rem 1.25rem;
      max-width:1200px;
      width:100%;
      margin:0 auto 1.5rem;
      font-size:.9rem;
      color:var(--text-dim);
    }
    .intro-title{
      font-size:.8rem;
      font-weight:600;
      color:var(--text-main);
      margin-bottom:.5rem;
      display:flex;
      flex-wrap:wrap;
      gap:.5rem;
      align-items:center;
    }
    .label-warning{
      background:rgba(255,0,72,.15);
      color:#ff0048;
      border:1px solid rgba(255,0,72,.4);
      font-size:.7rem;
      line-height:1.2;
      padding:.3rem .6rem;
      border-radius:var(--radius-full);
      font-weight:500;
    }

    main{
      flex:1;
      max-width:1200px;
      width:100%;
      margin:0 auto 4rem;
      padding:0 1rem 2rem;
    }

    /* ACCORDION */
    .level{
      background:var(--panel-bg);
      border:1px solid var(--panel-border);
      border-radius:var(--radius-xl);
      box-shadow:0 30px 80px rgba(0,0,0,.6);
      margin-bottom:1rem;
      overflow:hidden;
    }
    .level-header{
      width:100%;
      background:transparent;
      border:0;
      color:var(--text-main);
      text-align:left;
      padding:1rem 1.25rem;
      cursor:pointer;
      display:flex;
      flex-wrap:wrap;
      gap:.75rem 1rem;
      align-items:flex-start;
      justify-content:space-between;
    }
    .left-head{
      display:flex;
      flex-direction:column;
      min-width:0;
    }
    .lvl-top-row{
      display:flex;
      flex-wrap:wrap;
      align-items:center;
      gap:.5rem .75rem;
      font-size:.8rem;
    }
    .lvl-num{
      background:var(--accent-soft);
      color:var(--accent);
      border:1px solid var(--accent);
      border-radius:var(--radius-full);
      padding:.35rem .6rem;
      line-height:1.2;
      font-weight:600;
      font-size:.7rem;
    }
    .lvl-tag{
      background:rgba(0,0,0,.4);
      border:1px solid rgba(255,255,255,.07);
      border-radius:var(--radius-full);
      padding:.35rem .6rem;
      line-height:1.2;
      font-weight:500;
      font-size:.7rem;
      color:var(--text-dim);
    }
    .lvl-title{
      font-size:1rem;
      font-weight:600;
      color:var(--text-main);
      line-height:1.4;
    }
    .lvl-desc{
      font-size:.8rem;
      color:var(--text-dim);
      line-height:1.4;
      max-width:70ch;
    }
    .chevron{
      font-family: ui-monospace, SFMono-Regular, Consolas, "Liberation Mono", Menlo, monospace;
      background:#000;
      color:var(--accent);
      border:1px solid var(--accent);
      border-radius:var(--radius-full);
      font-size:.7rem;
      font-weight:600;
      line-height:1;
      padding:.5rem .6rem;
      height:2rem;
      min-width:2rem;
      display:flex;
      align-items:center;
      justify-content:center;
      box-shadow:0 20px 40px rgba(138,107,255,.4);
    }

    .panel{
      border-top:1px solid rgba(255,255,255,.07);
      padding:1rem 1.25rem 1.25rem;
      font-size:.9rem;
      color:var(--text-dim);
      display:none;
    }
    .panel.open{
      display:block;
    }

    h3{
      margin:.5rem 0 .75rem;
      font-size:.9rem;
      font-weight:600;
      color:var(--text-main);
      line-height:1.4;
    }

    p,li{margin:0 0 .6rem;font-size:.9rem;color:var(--text-dim);}   
    ul{margin:0 0 1rem 1.25rem;padding:0;}
    ol{margin:0 0 1rem 1.25rem;padding:0;}

    .code-bubble{
      font-family: ui-monospace, SFMono-Regular, Consolas, "Liberation Mono", Menlo, monospace;
      background: rgba(0,0,0,.4);
      border:1px solid rgba(255,255,255,.08);
      border-radius:var(--radius-lg);
      font-size:.8rem;
      padding:.6rem .75rem;
      line-height:1.4;
      color:var(--text-main);
      min-width:max-content;
      display:inline-block;
    }
    .teach-box{display:grid;gap:1rem;margin-top:1rem;}
    @media(min-width:768px){.teach-box{grid-template-columns:1fr 1fr;}}
    .teach-col{
      background:rgba(0,0,0,.25);
      border:1px solid rgba(255,255,255,.07);
      border-radius:var(--radius-lg);
      padding:1rem;
      font-size:.8rem;
      line-height:1.4;
    }
    .teach-col b{
      color:var(--text-main);
      font-weight:600;
      font-size:.8rem;
      display:block;
      margin-bottom:.4rem;
    }

    .final-code{
      font-family: ui-monospace, SFMono-Regular, Consolas, "Liberation Mono", Menlo, monospace;
      background:#000;
      color:var(--accent);
      border-radius:var(--radius-lg);
      padding:.6rem .75rem;
      font-size:.85rem;
      line-height:1.4;
      display:inline-block;
      border:1px solid var(--accent);
      box-shadow:0 10px 30px rgba(138,107,255,.4);
    }

    /* quiz elements */
    .quiz-block{
      margin:1rem 0 1.25rem;
      background:rgba(0,0,0,.25);
      border:1px solid rgba(255,255,255,.07);
      border-radius:var(--radius-lg);
      padding:1rem;
      font-size:.85rem;
      line-height:1.4;
    }
    .quiz-options{
      display:grid;
      gap:.5rem;
      margin:.75rem 0 1rem;
    }
    .quiz-option{
      background:rgba(0,0,0,.4);
      border:1px solid rgba(255,255,255,.07);
      border-radius:var(--radius-lg);
      padding:.75rem 1rem;
      display:flex;
      align-items:flex-start;
      gap:.75rem;
      cursor:pointer;
      transition:background .15s,border .15s,box-shadow .15s;
      font-size:.8rem;
    }
    .quiz-option input{
      margin-top:.2rem;
      accent-color:var(--accent);
    }
    .quiz-option.correct{
      border-color:var(--good);
      box-shadow:0 20px 40px rgba(49,209,88,.4);
    }
    .quiz-option.wrong{
      border-color:var(--bad);
      box-shadow:0 20px 40px rgba(255,0,72,.4);
    }
    .quiz-btn{
      background:var(--accent);
      color:#0a0a12;
      border:0;
      border-radius:var(--radius-full);
      padding:.7rem 1rem;
      font-size:.8rem;
      font-weight:600;
      line-height:1.2;
      cursor:pointer;
      box-shadow:0 20px 40px rgba(138,107,255,.4);
    }
    .quiz-result{
      font-size:.8rem;
      line-height:1.4;
      margin-top:.75rem;
      font-weight:500;
    }
    .quiz-result.good{color:var(--good);} 
    .quiz-result.bad{color:var(--bad);} 

    .input-row{
      display:flex;
      flex-wrap:wrap;
      gap:.75rem;
      align-items:center;
      font-size:.8rem;
    }
    .text-input{
      background:#000;
      color:var(--text-main);
      border:1px solid rgba(255,255,255,.15);
      border-radius:var(--radius-lg);
      padding:.6rem .75rem;
      line-height:1.2;
      font-size:.8rem;
      min-width:7rem;
    }

    footer{
      max-width:1200px;
      width:100%;
      margin:0 auto 4rem;
      padding:0 1rem;
      color:var(--text-dim);
      font-size:.75rem;
      text-align:center;
    }
  </style>
</head>
<body>
  <header>
    <div class="badge-row">
      <span class="badge">27.10.2025</span>
      <span class="badge">мастер‑класс</span>
      <span class="badge">кибербезопасность</span>
    </div>

    <h1>
      Операция «Сейф»
      <span class="mark">интерактивный киберквест</span>
    </h1>

    <div class="subtitle">
      Ты — цифровой спасатель. Тебе нужно выбрать сильный пароль, взломать шифр, разоблачить фишинг и ввести код сейфа. Всё делается прямо на этой странице.
    </div>
  </header>

  <div class="intro-box">
    <div class="intro-title">
      Миссия
      <span class="label-warning">СТАТУС: УТЕЧКА ДАННЫХ</span>
    </div>
    <p>
      Неизвестный пытается украсть секретные данные учебного центра. У нас осталось три зацепки: список паролей, зашифрованное сообщение и странное письмо.
    </p>
    <p>
      Твоя цель — получить три числа: <b style="color:#fff;">Код 1</b>, <b style="color:#fff;">Код 2</b>, <b style="color:#fff;">Код 3</b>. Потом собрать их в комбинацию сейфа.
    </p>
    <p><b style="color:#fff;">Формат:</b> <span class="final-code">Код1-Код2-Код3</span> (пример: 7-5-3)</p>
  </div>

  <main>

    <!-- Уровень 1 -->
    <div class="level" id="lvl1">
      <button class="level-header" data-target="panel1">
        <div class="left-head">
          <div class="lvl-top-row">
            <span class="lvl-num">Уровень 1</span>
            <span class="lvl-tag">пароли</span>
          </div>
          <div class="lvl-title">Выбери реальный надёжный пароль</div>
          <div class="lvl-desc">Если выберешь правильно — получишь Код 1.</div>
        </div>
        <div class="chevron">+</div>
      </button>
      <div class="panel" id="panel1">
        <h3>Какой пароль защищает лучше всего?</h3>
        <p>Выбери вариант. Подсказка: длина + разные типы символов + неочевидность.</p>

        <div class="quiz-block" id="quiz1">
          <div class="quiz-options">
            <label class="quiz-option">
              <input type="radio" name="q1" value="wrong1" />
              <div>
                <div class="code-bubble">Qwerty123</div>
                <div>Лёгкий, популярный, перебирается за секунды.</div>
              </div>
            </label>

            <label class="quiz-option">
              <input type="radio" name="q1" value="wrong2" />
              <div>
                <div class="code-bubble">Masha2007</div>
                <div>Имя + год рождения / дата. Это угадывают знакомые.</div>
              </div>
            </label>

            <label class="quiz-option">
              <input type="radio" name="q1" value="correct" />
              <div>
                <div class="code-bubble">P@ssw0rd!17</div>
                <div>Есть большой и маленький регистр, цифры, спецсимволы. Не похоже на одно слово.</div>
              </div>
            </label>
          </div>

          <button class="quiz-btn" data-check="q1">Проверить ответ</button>
          <div class="quiz-result" id="quiz1-result"></div>
          <div class="quiz-result" id="code1" style="display:none;">
            Код 1: <span class="final-code">7</span>
          </div>
        </div>

        <div class="teach-box">
          <div class="teach-col">
            <b>Запомни</b>
            Один слабый пароль = злоумышленник даже не «ломает» систему, он просто входит под твоим именем.
          </div>
          <div class="teach-col">
            <b>Мини-правило</b>
            Длина + разные символы + неочевидно = живёшь.
          </div>
        </div>
      </div>
    </div>

    <!-- Уровень 2 -->
    <div class="level" id="lvl2">
      <button class="level-header" data-target="panel2">
        <div class="left-head">
          <div class="lvl-top-row">
            <span class="lvl-num">Уровень 2</span>
            <span class="lvl-tag">крипто</span>
          </div>
          <div class="lvl-title">Шифр Цезаря</div>
          <div class="lvl-desc">Расшифруй текст и узнай Код 2.</div>
        </div>
        <div class="chevron">+</div>
      </button>
      <div class="panel" id="panel2">
        <h3>Перехваченное сообщение</h3>
        <p>
          Хакер сдвинул каждую букву вперёд по алфавиту на +3.
          Чтобы прочитать, сдвинь каждую букву <b>назад</b> на 3.
        </p>

        <div class="quiz-block" id="quiz2">
          <div style="font-size:.8rem; color:var(--text-main); font-weight:600; margin-bottom:.5rem;">
            Зашифровано:
          </div>
          <div class="code-bubble" style="margin-bottom:1rem;">ZDG</div>

          <div class="input-row">
            <label for="q2-input">Твоя расшифровка:</label>
            <input id="q2-input" class="text-input" placeholder="введи слово" />
            <button class="quiz-btn" data-check="q2">Проверить</button>
          </div>

          <div class="quiz-result" id="quiz2-result"></div>
          <div class="quiz-result" id="code2" style="display:none;">
            Код 2: <span class="final-code">5</span>
          </div>
        </div>

        <div class="teach-box">
          <div class="teach-col">
            <b>Смысл</b>
            Шифр = правило замены. Ты знаешь правило → ты читаешь. Не знаешь → видишь абракадабру.
          </div>
          <div class="teach-col">
            <b>В реальной жизни</b>
            Современная криптография сложнее Цезаря в миллион раз, но идея та же: нужен ключ.
          </div>
        </div>
      </div>
    </div>

    <!-- Уровень 3 -->
    <div class="level" id="lvl3">
      <button class="level-header" data-target="panel3">
        <div class="left-head">
          <div class="lvl-top-row">
            <span class="lvl-num">Уровень 3</span>
            <span class="lvl-tag">фишинг</span>
          </div>
          <div class="lvl-title">Письмо «от админа»</div>
          <div class="lvl-desc">Разоблачи мошенника и получи Код 3.</div>
        </div>
        <div class="chevron">+</div>
      </button>
      <div class="panel" id="panel3">
        <h3>Тебе прилетает вот такое сообщение:</h3>
        <div class="quiz-block" style="font-size:.8rem; line-height:1.5;">
          <b style="color:var(--text-main);">Тема: Срочно подтвердите аккаунт!</b><br/><br/>
          «СРОЧНО перейдите по ссылке, иначе мы ВЫКЛЮЧИМ ваш аккаунт через 10 минут.
          Введите логин и пароль для подтверждения. Если вы не сделаете это прямо сейчас,
          доступ к учебным материалам будет УДАЛЁН.»
        </div>

        <p>Что не так с этим письмом? Выбери ВСЁ, что выглядит подозрительно:</p>

        <div class="quiz-block" id="quiz3">
          <div class="quiz-options">
            <label class="quiz-option multi">
              <input type="checkbox" value="panic" />
              <div>Давят на панику: «через 10 минут всё удалим».</div>
            </label>
            <label class="quiz-option multi">
              <input type="checkbox" value="askpass" />
              <div>Просят ввести логин и пароль по ссылке.</div>
            </label>
            <label class="quiz-option multi">
              <input type="checkbox" value="looksFine" />
              <div>Это нормальное рабочее письмо, тут всё хорошо.</div>
            </label>
            <label class="quiz-option multi">
              <input type="checkbox" value="lang" />
              <div>Текст написан агрессивно/криво, много caps lock.</div>
            </label>
          </div>

          <button class="quiz-btn" data-check="q3">Проверить</button>
          <div class="quiz-result" id="quiz3-result"></div>
          <div class="quiz-result" id="code3" style="display:none;">
            Код 3: <span class="final-code">3</span>
          </div>
        </div>

        <div class="teach-box">
          <div class="teach-col">
            <b>Главное</b>
            Настоящий взлом чаще не через вирус, а через эмоции. Тебя пугают → ты сам отдаёшь пароль.
          </div>
          <div class="teach-col">
            <b>Правило</b>
            Никогда не вводи пароли по ссылке из письма в стиле «быстро иначе бан».
          </div>
        </div>
      </div>
    </div>

    <!-- Финал -->
    <div class="level" id="lvl4">
      <button class="level-header" data-target="panel4">
        <div class="left-head">
          <div class="lvl-top-row">
            <span class="lvl-num">Финал</span>
            <span class="lvl-tag">взлом сейфа</span>
          </div>
          <div class="lvl-title">Собери комбинацию</div>
          <div class="lvl-desc">Введи трёхзначный код. Если он верный — сейф открыт.</div>
        </div>
        <div class="chevron">+</div>
      </button>
      <div class="panel" id="panel4">
        <h3>Финальный ввод</h3>
        <p>Собери код из трёх частей:</p>
        <ol>
          <li>Код 1 (из паролей)</li>
          <li>Код 2 (из шифра)</li>
          <li>Код 3 (из письма)</li>
        </ol>

        <div class="quiz-block" id="final">
          <div class="input-row">
            <label for="final-input">Комбинация (пример формата 7-5-3):</label>
            <input id="final-input" class="text-input" placeholder="?-?-?" />
            <button class="quiz-btn" id="final-check">Открыть сейф</button>
          </div>
          <div class="quiz-result" id="final-result"></div>
        </div>

        <div class="teach-box">
          <div class="teach-col">
            <b>Что ты сейчас сделал(а)</b>
            Научился отличать надёжный пароль, понял базовый принцип шифра и увидел фишинг.
          </div>
          <div class="teach-col">
            <b>Это кибергигиена</b>
            Вот это — реальная защита аккаунтов. Не только «антивирус», а твоя голова.
          </div>
        </div>
      </div>
    </div>

  </main>

  <footer>
    Мастер‑класс «Операция «Сейф». 27.10.2025. Учебный сценарий.
  </footer>

  <script>
    // ---------- аккордеон ----------
    document.querySelectorAll('.level-header').forEach(btn => {
      btn.addEventListener('click', () => {
        const targetId = btn.getAttribute('data-target');
        const panel = document.getElementById(targetId);
        const chevron = btn.querySelector('.chevron');
        const isOpen = panel.classList.contains('open');

        // закрываем все панели
        document.querySelectorAll('.panel').forEach(p => p.classList.remove('open'));
        document.querySelectorAll('.chevron').forEach(ch => ch.textContent = '+');

        // открыть выбранную если была закрыта
        if (!isOpen) {
          panel.classList.add('open');
          chevron.textContent = '−';
        }
      });
    });

    // ---------- Уровень 1: пароли ----------
    document.querySelector('[data-check="q1"]').addEventListener('click', () => {
      const resultEl = document.getElementById('quiz1-result');
      const codeEl = document.getElementById('code1');
      const options = document.querySelectorAll('#quiz1 .quiz-option');
      const checked = document.querySelector('input[name="q1"]:checked');

      // сброс оформления
      options.forEach(o => {
        o.classList.remove('correct','wrong');
      });

      if (!checked){
        resultEl.textContent = 'Выбери вариант.';
        resultEl.className = 'quiz-result bad';
        codeEl.style.display = 'none';
        return;
      }

      if (checked.value === 'correct') {
        resultEl.textContent = 'Верно. Этот пароль считается сильным.';
        resultEl.className = 'quiz-result good';
        checked.closest('.quiz-option').classList.add('correct');
        codeEl.style.display = 'block';
      } else {
        resultEl.textContent = 'Нет. Такой пароль легко угадать или перебрать.';
        resultEl.className = 'quiz-result bad';
        checked.closest('.quiz-option').classList.add('wrong');
        codeEl.style.display = 'none';
      }
    });

    // ---------- Уровень 2: шифр ----------
    document.querySelector('[data-check="q2"]').addEventListener('click', () => {
      const input = document.getElementById('q2-input').value.trim().toLowerCase();
      const resultEl = document.getElementById('quiz2-result');
      const codeEl = document.getElementById('code2');

      // ожидаемое слово после сдвига назад: ZDG -> WAD
      const expected = 'wad';

      if (!input){
        resultEl.textContent = 'Введи расшифровку.';
        resultEl.className = 'quiz-result bad';
        codeEl.style.display = 'none';
        return;
      }

      if (input === expected) {
        resultEl.textContent = 'Красиво. Ты умеешь снимать сдвиг.';
        resultEl.className = 'quiz-result good';
        codeEl.style.display = 'block';
      } else {
        resultEl.textContent = 'Не то слово. Попробуй подумать: Z -> W (три назад), D -> A, G -> ?';
        resultEl.className = 'quiz-result bad';
        codeEl.style.display = 'none';
      }
    });

    // ---------- Уровень 3: фишинг ----------
    document.querySelector('[data-check="q3"]').addEventListener('click', () => {
      const boxes = document.querySelectorAll('#quiz3 input[type="checkbox"]');
      const resultEl = document.getElementById('quiz3-result');
      const codeEl = document.getElementById('code3');

      // правильные: panic, askpass, lang
      const correctSet = ['panic','askpass','lang'];
      const chosen = Array.from(boxes).filter(b => b.checked).map(b => b.value);

      // оформление сброс
      document.querySelectorAll('#quiz3 .quiz-option').forEach(o => {
        o.classList.remove('correct','wrong');
      });

      // подсветка выбранного
      chosen.forEach(val => {
        const opt = Array.from(document.querySelectorAll('#quiz3 .quiz-option')).find(o => o.querySelector('input').value === val);
        if (opt){
          if (correctSet.includes(val)) {
            opt.classList.add('correct');
          } else {
            opt.classList.add('wrong');
          }
        }
      });

      // логика проверки
      const isCorrect = chosen.length === correctSet.length && correctSet.every(v => chosen.includes(v));

      if (isCorrect) {
        resultEl.textContent = 'Да. Это фишинг. Давят, требуют пароль, пишут агрессивно.';
        resultEl.className = 'quiz-result good';
        codeEl.style.display = 'block';
      } else {
        resultEl.textContent = 'Не всё отметила правильно. Подумай: нормальные админы никогда не требуют пароль по ссылке.';
        resultEl.className = 'quiz-result bad';
        codeEl.style.display = 'none';
      }
    });

    // ---------- Финал ----------
    document.getElementById('final-check').addEventListener('click', () => {
      const input = document.getElementById('final-input').value.trim();
      const resultEl = document.getElementById('final-result');

      if (!input){
        resultEl.textContent = 'Введи код в формате 7-5-3';
        resultEl.className = 'quiz-result bad';
        return;
      }

      if (input === '7-5-3') {
        resultEl.textContent = 'Сейф открыт. Данные спасены. Миссия выполнена 🎉';
        resultEl.className = 'quiz-result good';
      } else {
        resultEl.textContent = 'Код неверный. Проверь снова пароли / шифр / фишинг.';
        resultEl.className = 'quiz-result bad';
      }
    });
  </script>
</body>
</html>

<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Операция «Сейф» — Киберквест</title>
  <style>
    :root {
      --bg-gradient: radial-gradient(circle at 20% 20%, #1a1a2f 0%, #050508 70%);
      --panel-bg: rgba(24,24,40,0.7);
      --panel-border: rgba(255,255,255,.08);

      --glass-bg: rgba(0,0,0,.35);
      --glass-border: rgba(255,255,255,.07);

      --accent: #8a6bff;
      --accent-soft: rgba(138,107,255,.15);

      --text-main:#fff;
      --text-dim:#9ca3c7;
      --text-bright:#ffffff;

      --good:#31d158;
      --bad:#ff0048;

      --radius-xl:1.5rem;
      --radius-lg:1rem;
      --radius-full:999px;

      --shadow-card:0 40px 120px rgba(0,0,0,.8),0 0 80px rgba(138,107,255,.15);
      --shadow-accent:0 30px 60px rgba(138,107,255,.45),0 0 30px rgba(138,107,255,.6);

      --font-stack:"Inter", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", sans-serif;
      --mono-stack: ui-monospace, SFMono-Regular, Consolas, "Liberation Mono", Menlo, monospace;

      --base-font: 1rem;          /* ~16px */
      --sm-font: .9rem;           /* ~14px */
      --lg-font: 1.125rem;        /* ~18px */
      --xl-font: 1.25rem;         /* ~20px */
    }

    @media(min-width:480px){
      :root {
        --base-font: 1.125rem;    /* ~18px */
        --sm-font: 1rem;          /* ~16px */
        --lg-font: 1.25rem;       /* ~20px */
        --xl-font: 1.375rem;      /* ~22px */
      }
    }

    *{
      box-sizing:border-box;
      -webkit-font-smoothing:antialiased;
    }

    body{
      margin:0;
      min-height:100vh;
      background:var(--bg-gradient);
      background-attachment: fixed;
      color:var(--text-main);
      font-family:var(--font-stack);
      line-height:1.5;
      display:flex;
      flex-direction:column;
    }

    header{
      padding:2rem 1rem 1rem;
      max-width:1280px;
      width:100%;
      margin:0 auto;
      display:grid;
      gap:1rem;
    }

    /* top meta row */
    .badge-row{
      display:flex;
      flex-wrap:wrap;
      gap:.5rem .75rem;
      font-size:var(--sm-font);
      color:var(--text-dim);
    }
    .badge{
      background:var(--accent-soft);
      color:var(--accent);
      border:1px solid var(--accent);
      border-radius:var(--radius-full);
      padding:.5rem .9rem;
      font-weight:500;
      line-height:1.2;
      white-space:nowrap;
      box-shadow:var(--shadow-accent);
      text-shadow:0 0 8px rgba(138,107,255,.8);
    }

    /* title block */
    h1{
      margin:0;
      display:flex;
      flex-wrap:wrap;
      align-items:flex-start;
      gap:.75rem 1rem;
      font-size:clamp(1.5rem,2vw,2rem);
      font-weight:600;
      color:var(--text-main);
      line-height:1.2;
    }
    h1 .mark{
      background:var(--accent-soft);
      color:var(--accent);
      border:1px solid var(--accent);
      border-radius:var(--radius-full);
      padding:.5rem .9rem;
      font-size:var(--sm-font);
      line-height:1.2;
      font-weight:500;
      box-shadow:var(--shadow-accent);
      text-shadow:0 0 8px rgba(138,107,255,.8);
    }
    .subtitle{
      font-size:var(--lg-font);
      color:var(--text-dim);
      max-width:60ch;
      line-height:1.4;
    }

    /* mission panel */
    .intro-box{
      background:var(--glass-bg);
      border:1px solid var(--glass-border);
      border-radius:var(--radius-xl);
      box-shadow:var(--shadow-card);
      padding:1.25rem 1.25rem 1.5rem;
      max-width:1280px;
      width:100%;
      margin:0 auto 2rem;
      font-size:var(--base-font);
      color:var(--text-dim);
      position:relative;
      overflow:hidden;
    }

    .intro-box::before{
      content:"";
      position:absolute;
      top:0;
      right:0;
      width:220px;
      height:220px;
      background:radial-gradient(circle at 30% 30%, rgba(138,107,255,.4) 0%, rgba(0,0,0,0) 70%);
      filter:blur(40px);
      opacity:.4;
      pointer-events:none;
    }

    .intro-title{
      font-size:var(--sm-font);
      font-weight:600;
      color:var(--text-main);
      margin-bottom:.75rem;
      display:flex;
      flex-wrap:wrap;
      gap:.5rem .75rem;
      align-items:center;
      line-height:1.4;
    }
    .label-warning{
      background:rgba(255,0,72,.15);
      color:#ff0048;
      border:1px solid rgba(255,0,72,.4);
      font-size:var(--sm-font);
      line-height:1.2;
      padding:.4rem .7rem;
      border-radius:var(--radius-full);
      font-weight:500;
      text-shadow:0 0 8px rgba(255,0,72,.6);
      box-shadow:0 30px 60px rgba(255,0,72,.25),0 0 40px rgba(255,0,72,.5);
    }

    .mission-terminal{
      font-family:var(--mono-stack);
      background:#00000066;
      border:1px solid rgba(255,255,255,.12);
      border-radius:var(--radius-lg);
      color:var(--text-bright);
      font-size:var(--sm-font);
      line-height:1.5;
      padding:1rem 1rem 1.25rem;
      margin-top:1rem;
      box-shadow:0 20px 60px rgba(0,0,0,.9),
                 0 0 30px rgba(138,107,255,.4);
    }
    .terminal-line{
      white-space:pre-wrap;
      word-break:break-word;
      color:var(--accent);
    }
    .terminal-value{
      color:var(--text-main);
    }

    main{
      flex:1;
      max-width:1280px;
      width:100%;
      margin:0 auto 4rem;
      padding:0 1rem 2rem;
    }

    /* ACCORDION CARD/LVL */
    .level{
      background:var(--panel-bg);
      border:1px solid var(--panel-border);
      border-radius:var(--radius-xl);
      box-shadow:var(--shadow-card);
      margin-bottom:1.5rem;
      overflow:hidden;
      position:relative;
    }
    .level::before{
      content:"";
      position:absolute;
      inset:0;
      border-radius:inherit;
      background:radial-gradient(circle at 0% 0%, rgba(138,107,255,.18) 0%, rgba(0,0,0,0) 70%);
      pointer-events:none;
    }

    .level-header{
      width:100%;
      background:transparent;
      border:0;
      color:var(--text-main);
      text-align:left;
      padding:1.25rem 1.25rem 1rem;
      cursor:pointer;
      display:flex;
      flex-wrap:wrap;
      gap:1rem 1rem;
      align-items:flex-start;
      justify-content:space-between;
      position:relative;
      z-index:2;
    }
    .left-head{
      display:flex;
      flex-direction:column;
      min-width:0;
    }
    .lvl-top-row{
      display:flex;
      flex-wrap:wrap;
      align-items:center;
      gap:.6rem .75rem;
      font-size:var(--sm-font);
    }
    .lvl-num{
      background:var(--accent-soft);
      color:var(--accent);
      border:1px solid var(--accent);
      border-radius:var(--radius-full);
      padding:.45rem .75rem;
      line-height:1.2;
      font-weight:600;
      font-size:var(--sm-font);
      text-shadow:0 0 8px rgba(138,107,255,.8);
      box-shadow:var(--shadow-accent);
    }
    .lvl-tag{
      background:rgba(0,0,0,.4);
      border:1px solid rgba(255,255,255,.1);
      border-radius:var(--radius-full);
      padding:.45rem .75rem;
      line-height:1.2;
      font-weight:500;
      font-size:var(--sm-font);
      color:var(--text-dim);
    }
    .lvl-title{
      font-size:var(--lg-font);
      font-weight:600;
      color:var(--text-main);
      line-height:1.3;
    }
    .lvl-desc{
      font-size:var(--sm-font);
      color:var(--text-dim);
      line-height:1.4;
      max-width:70ch;
      margin-top:.4rem;
    }

    .chevron{
      font-family:var(--mono-stack);
      background:#000;
      color:var(--accent);
      border:1px solid var(--accent);
      border-radius:var(--radius-full);
      font-size:var(--sm-font);
      font-weight:600;
      line-height:1;
      padding:.6rem .75rem;
      height:2.4rem;
      min-width:2.4rem;
      display:flex;
      align-items:center;
      justify-content:center;
      box-shadow:var(--shadow-accent);
      text-shadow:0 0 8px rgba(138,107,255,.8);
    }

    .panel{
      border-top:1px solid rgba(255,255,255,.07);
      padding:1.25rem 1.25rem 1.5rem;
      font-size:var(--base-font);
      color:var(--text-dim);
      display:none;
      position:relative;
      z-index:2;
    }
    .panel.open{
      display:block;
    }

    h3{
      margin:.5rem 0 1rem;
      font-size:var(--lg-font);
      font-weight:600;
      color:var(--text-main);
      line-height:1.3;
    }

    p,li{
      margin:0 0 .8rem;
      font-size:var(--base-font);
      color:var(--text-dim);
      line-height:1.5;
    }
    ul{
      margin:0 0 1.25rem 1.25rem;
      padding:0;
    }
    ol{
      margin:0 0 1.25rem 1.25rem;
      padding:0;
    }

    .code-bubble{
      font-family:var(--mono-stack);
      background: rgba(0,0,0,.5);
      border:1px solid rgba(255,255,255,.12);
      border-radius:var(--radius-lg);
      font-size:var(--sm-font);
      padding:.75rem .9rem;
      line-height:1.4;
      color:var(--text-main);
      min-width:max-content;
      display:inline-block;
      box-shadow:0 20px 60px rgba(0,0,0,.9),
                 0 0 30px rgba(138,107,255,.4);
    }

    .teach-box{
      display:grid;
      gap:1rem;
      margin-top:1.5rem;
    }
    @media(min-width:768px){
      .teach-box{grid-template-columns:1fr 1fr;}
    }
    .teach-col{
      background:rgba(0,0,0,.4);
      border:1px solid rgba(255,255,255,.12);
      border-radius:var(--radius-lg);
      padding:1rem 1rem 1.25rem;
      font-size:var(--sm-font);
      line-height:1.4;
      box-shadow:0 20px 60px rgba(0,0,0,.9),
                 0 0 30px rgba(138,107,255,.4);
    }
    .teach-col b{
      color:var(--text-main);
      font-weight:600;
      font-size:var(--sm-font);
      display:block;
      margin-bottom:.5rem;
      line-height:1.4;
      text-shadow:0 0 8px rgba(255,255,255,.4);
    }

    .final-code{
      font-family:var(--mono-stack);
      background:#000;
      color:var(--accent);
      border-radius:var(--radius-lg);
      padding:.6rem .75rem;
      font-size:var(--base-font);
      line-height:1.4;
      display:inline-block;
      border:1px solid var(--accent);
      box-shadow:var(--shadow-accent);
      text-shadow:0 0 8px rgba(138,107,255,.8);
    }

    /* quiz elements */
    .quiz-block{
      margin:1.25rem 0 1.5rem;
      background:rgba(0,0,0,.4);
      border:1px solid rgba(255,255,255,.12);
      border-radius:var(--radius-lg);
      padding:1rem 1rem 1.25rem;
      font-size:var(--base-font);
      line-height:1.5;
      box-shadow:0 20px 60px rgba(0,0,0,.9),
                 0 0 30px rgba(138,107,255,.4);
    }

    .quiz-options{
      display:grid;
      gap:.75rem;
      margin:1rem 0 1.25rem;
    }

    .quiz-option{
      background:rgba(0,0,0,.55);
      border:1px solid rgba(255,255,255,.12);
      border-radius:var(--radius-lg);
      padding:1rem 1rem 1rem;
      display:flex;
      align-items:flex-start;
      gap:.9rem;
      cursor:pointer;
      transition:background .15s,border .15s,box-shadow .15s;
      font-size:var(--sm-font);
      line-height:1.4;
      box-shadow:0 20px 60px rgba(0,0,0,.9),
                 0 0 30px rgba(138,107,255,.4);
    }

    .quiz-option input{
      margin-top:.3rem;
      width:1.1rem;
      height:1.1rem;
      accent-color:var(--accent);
    }

    .quiz-option.correct{
      border-color:var(--good);
      box-shadow:0 30px 80px rgba(0,0,0,.9),
                 0 0 30px rgba(49,209,88,.6);
    }
    .quiz-option.wrong{
      border-color:var(--bad);
      box-shadow:0 30px 80px rgba(0,0,0,.9),
                 0 0 30px rgba(255,0,72,.6);
    }

    .quiz-btn{
      background:var(--accent);
      color:#0a0a12;
      border:0;
      border-radius:var(--radius-full);
      padding:1rem 1.25rem;
      font-size:var(--sm-font);
      font-weight:600;
      line-height:1.2;
      cursor:pointer;
      box-shadow:var(--shadow-accent);
      text-shadow:0 0 8px rgba(138,107,255,.8);
    }

    .quiz-result{
      font-size:var(--sm-font);
      line-height:1.4;
      margin-top:1rem;
      font-weight:500;
      min-height:1.4em;
    }
    .quiz-result.good{color:var(--good);} 
    .quiz-result.bad{color:var(--bad);} 

    .input-row{
      display:flex;
      flex-wrap:wrap;
      gap:1rem;
      align-items:center;
      font-size:var(--sm-font);
    }

    .text-input{
      background:#000;
      color:var(--text-main);
      border:1px solid rgba(255,255,255,.3);
      border-radius:var(--radius-lg);
      padding:.8rem 1rem;
      line-height:1.3;
      font-size:var(--sm-font);
      min-width:10rem;
      box-shadow:0 20px 60px rgba(0,0,0,.9),
                 0 0 30px rgba(138,107,255,.4);
    }

    footer{
      max-width:1280px;
      width:100%;
      margin:0 auto 4rem;
      padding:0 1rem;
      color:var(--text-dim);
      font-size:var(--sm-font);
      text-align:center;
      line-height:1.4;
    }
  </style>
</head>
<body>
  <header>
    <div class="badge-row">
      <span class="badge">27.10.2025</span>
      <span class="badge">мастер-класс</span>
      <span class="badge">кибербезопасность</span>
    </div>

    <h1>
      Операция «Сейф»
      <span class="mark">интерактивный киберквест</span>
    </h1>

    <div class="subtitle">
      Твоя задача: выбрать сильный пароль, взломать шифр, разоблачить фишинг и открыть сейф кодом.
      Всё прямо здесь, без скачиваний и без папок.
    </div>
  </header>

  <div class="intro-box">
    <div class="intro-title">
      Миссия
      <span class="label-warning">СТАТУС: УТЕЧКА ДАННЫХ</span>
    </div>

    <p>
      Неизвестный пытается украсть важные данные учебного центра. У нас есть три улики:
      список паролей, зашифрованное сообщение и подозрительное письмо.
    </p>

    <p>
      Тебе нужно добыть три числа: <b style="color:#fff;">Код 1</b>,
      <b style="color:#fff;">Код 2</b>,
      <b style="color:#fff;">Код 3</b>. Потом ввести комбинацию сейфа.
    </p>

    <p><b style="color:#fff;">Формат кода:</b>
      <span class="final-code">Код1-Код2-Код3</span>
      (пример: 7-5-3)
    </p>

    <div class="mission-terminal">
      <div class="terminal-line">> STATUS:<span class="terminal-value"> breach_detected / ACCESS LOCKED</span></div>
      <div class="terminal-line">> OBJECTIVE:<span class="terminal-value"> recover data before purge</span></div>
      <div class="terminal-line">> AUTH REQUIRED:<span class="terminal-value"> 3-segment safe code</span></div>
    </div>
  </div>

  <main>

    <!-- Уровень 1 -->
    <div class="level" id="lvl1">
      <button class="level-header" data-target="panel1">
        <div class="left-head">
          <div class="lvl-top-row">
            <span class="lvl-num">Уровень 1</span>
            <span class="lvl-tag">пароли</span>
          </div>
          <div class="lvl-title">Выбери реальный надёжный пароль</div>
          <div class="lvl-desc">Если выберешь правильно — откроется Код 1.</div>
        </div>
        <div class="chevron">+</div>
      </button>

      <div class="panel" id="panel1">
        <h3>Какой пароль защищает лучше всего?</h3>
        <p>Выбери вариант. Подсказка: длина + разные типы символов + неочевидность.</p>

        <div class="quiz-block" id="quiz1">
          <div class="quiz-options">
            <label class="quiz-option">
              <input type="radio" name="q1" value="wrong1" />
              <div>
                <div class="code-bubble">Qwerty123</div>
                <div>Очень популярный и легко перебирается.</div>
              </div>
            </label>

            <label class="quiz-option">
              <input type="radio" name="q1" value="wrong2" />
              <div>
                <div class="code-bubble">Masha2007</div>
                <div>Имя + дата. Это угадывает одногруппник.</div>
              </div>
            </label>

            <label class="quiz-option">
              <input type="radio" name="q1" value="correct" />
              <div>
                <div class="code-bubble">P@ssw0rd!17</div>
                <div>Разный регистр, цифры, спецсимволы. Не выглядит как слово.</div>
              </div>
            </label>
          </div>

          <button class="quiz-btn" data-check="q1">Проверить ответ</button>
          <div class="quiz-result" id="quiz1-result"></div>
          <div class="quiz-result" id="code1" style="display:none;">
            Код 1: <span class="final-code">7</span>
          </div>
        </div>

        <div class="teach-box">
          <div class="teach-col">
            <b>Запомни</b>
            Слабый пароль = злоумышленник не ломает систему,
            он просто входит под твоим именем.
          </div>
          <div class="teach-col">
            <b>Мини-правило</b>
            Длина + разные символы + неочевидно = живёшь.
          </div>
        </div>
      </div>
    </div>

    <!-- Уровень 2 -->
    <div class="level" id="lvl2">
      <button class="level-header" data-target="panel2">
        <div class="left-head">
          <div class="lvl-top-row">
            <span class="lvl-num">Уровень 2</span>
            <span class="lvl-tag">крипто</span>
          </div>
          <div class="lvl-title">Шифр Цезаря</div>
          <div class="lvl-desc">Расшифруй текст — получи Код 2.</div>
        </div>
        <div class="chevron">+</div>
      </button>

      <div class="panel" id="panel2">
        <h3>Перехваченное сообщение</h3>
        <p>
          Хакер сдвинул каждую букву вперёд по русскому алфавиту на +3.
          Твоя задача: сдвинуть каждую букву назад на 3, чтобы прочитать.
        </p>

        <div class="quiz-block" id="quiz2">
          <div style="font-size:var(--sm-font); color:var(--text-main); font-weight:600; margin-bottom:.75rem;">
            Зашифровано (сдвиг +3):
          </div>

          <div class="code-bubble" style="margin-bottom:1rem; line-height:1.5; text-wrap:balance;">
            ДЖУЖЖЛ ФДХЛ ТГУСОП Л РЛНРПХ ЖЕ РХССЕЛБЙ
          </div>

          <p style="font-size:var(--sm-font); line-height:1.4; color:var(--text-dim); margin-bottom:1rem;">
            Подсказка: в нормальном тексте есть слово
            <b style="color:#fff;">ПАРОЛЬ</b>.
          </p>

          <div class="input-row">
            <label for="q2-input">Твоя расшифровка:</label>
            <input id="q2-input" class="text-input" placeholder="введи полный текст" />
            <button class="quiz-btn" data-check="q2">Проверить</button>
          </div>

          <div class="quiz-result" id="quiz2-result"></div>
          <div class="quiz-result" id="code2" style="display:none;">
            Код 2: <span class="final-code">5</span>
          </div>
        </div>

        <div class="teach-box">
          <div class="teach-col">
            <b>Смысл</b>
            Шифр = правило замены. Если знаешь правило,
            читаешь. Если нет — видишь абракадабру.
          </div>
          <div class="teach-col">
            <b>В реальности</b>
            Современная криптография сложнее Цезаря,
            но идея та же: всё держится на ключе.
          </div>
        </div>
      </div>
    </div>

    <!-- Уровень 3 -->
    <div class="level" id="lvl3">
      <button class="level-header" data-target="panel3">
        <div class="left-head">
          <div class="lvl-top-row">
            <span class="lvl-num">Уровень 3</span>
            <span class="lvl-tag">фишинг</span>
          </div>
          <div class="lvl-title">Письмо «от админа»</div>
          <div class="lvl-desc">Разоблачи мошенника — получи Код 3.</div>
        </div>
        <div class="chevron">+</div>
      </button>

      <div class="panel" id="panel3">
        <h3>Тебе пришло это письмо:</h3>

        <div class="quiz-block" style="font-size:var(--sm-font); line-height:1.5;">
          <b style="color:var(--text-main);">Тема: Срочно подтвердите аккаунт!</b><br/><br/>
          «СРОЧНО перейдите по ссылке, иначе мы ВЫКЛЮЧИМ ваш аккаунт через 10 минут.
          Введите логин и пароль для подтверждения. Если вы не сделаете это прямо сейчас,
          доступ к учебным материалам будет УДАЛЁН.»
        </div>

        <p>Что не так с этим письмом? Отметь ВСЁ, что подозрительно:</p>

        <div class="quiz-block" id="quiz3">
          <div class="quiz-options">
            <label class="quiz-option multi">
              <input type="checkbox" value="panic" />
              <div>Запугивают временем: «через 10 минут всё удалим».</div>
            </label>

            <label class="quiz-option multi">
              <input type="checkbox" value="askpass" />
              <div>Просят ввести логин и пароль по ссылке.</div>
            </label>

            <label class="quiz-option multi">
              <input type="checkbox" value="looksFine" />
              <div>Это обычное официальное письмо, всё нормально.</div>
            </label>

            <label class="quiz-option multi">
              <input type="checkbox" value="lang" />
              <div>Агрессивный тон, капс лок, орфография странная.</div>
            </label>
          </div>

          <button class="quiz-btn" data-check="q3">Проверить</button>
          <div class="quiz-result" id="quiz3-result"></div>
          <div class="quiz-result" id="code3" style="display:none;">
            Код 3: <span class="final-code">3</span>
          </div>
        </div>

        <div class="teach-box">
          <div class="teach-col">
            <b>Главное</b>
            Чаще всего ломают не через вирус,
            а через давление. Тебя пугают → ты сам отдаёшь пароль.
          </div>
          <div class="teach-col">
            <b>Правило</b>
            Никогда не вводи пароли по ссылке из письма «срочно иначе бан».
          </div>
        </div>
      </div>
    </div>

    <!-- Финал -->
    <div class="level" id="lvl4">
      <button class="level-header" data-target="panel4">
        <div class="left-head">
          <div class="lvl-top-row">
            <span class="lvl-num">Финал</span>
            <span class="lvl-tag">взлом сейфа</span>
          </div>
          <div class="lvl-title">Открой сейф</div>
          <div class="lvl-desc">Введи весь код. Если он верный — миссия спасена.</div>
        </div>
        <div class="chevron">+</div>
      </button>

      <div class="panel" id="panel4">
        <h3>Финальный ввод</h3>

        <p>Собери код из трёх частей:</p>
        <ol>
          <li>Код 1 (из паролей)</li>
          <li>Код 2 (из шифра)</li>
          <li>Код 3 (из письма)</li>
        </ol>

        <div class="quiz-block" id="final">
          <div class="input-row">
            <label for="final-input">Комбинация (пример: 7-5-3):</label>
            <input id="final-input" class="text-input" placeholder="?-?-?" />
            <button class="quiz-btn" id="final-check">Открыть сейф</button>
          </div>

          <div class="quiz-result" id="final-result"></div>
        </div>

        <div class="teach-box">
          <div class="teach-col">
            <b>Что ты сделал(а)</b>
            Отличаешь слабый пароль от сильного,
            умеешь читать шифр,
            знаешь признаки фишинга.
          </div>
          <div class="teach-col">
            <b>Это и есть кибергигиена</b>
            Это защита аккаунта в реальной жизни.
            Не антивирус. Ты.
          </div>
        </div>
      </div>
    </div>
  </main>

  <footer>
    Мастер-класс «Операция «Сейф». 27.10.2025. Учебный сценарий.
  </footer>

  <script>
    // ---------- аккордеон ----------
    document.querySelectorAll('.level-header').forEach(btn => {
      btn.addEventListener('click', () => {
        const targetId = btn.getAttribute('data-target');
        const panel = document.getElementById(targetId);
        const chevron = btn.querySelector('.chevron');
        const isOpen = panel.classList.contains('open');

        // закрыть всё
        document.querySelectorAll('.panel').forEach(p => p.classList.remove('open'));
        document.querySelectorAll('.chevron').forEach(ch => ch.textContent = '+');

        // открыть выбранное
        if (!isOpen) {
          panel.classList.add('open');
          chevron.textContent = '−';
        }
      });
    });

    // ---------- Уровень 1: пароли ----------
    document.querySelector('[data-check="q1"]').addEventListener('click', () => {
      const resultEl = document.getElementById('quiz1-result');
      const codeEl = document.getElementById('code1');
      const options = document.querySelectorAll('#quiz1 .quiz-option');
      const checked = document.querySelector('input[name="q1"]:checked');

      // сброс оформления
      options.forEach(o => {
        o.classList.remove('correct','wrong');
      });

      if (!checked){
        resultEl.textContent = 'Выбери вариант.';
        resultEl.className = 'quiz-result bad';
        codeEl.style.display = 'none';
        return;
      }

      if (checked.value === 'correct') {
        resultEl.textContent = 'Верно. Такой пароль тяжело угадать.';
        resultEl.className = 'quiz-result good';
        checked.closest('.quiz-option').classList.add('correct');
        codeEl.style.display = 'block';
      } else {
        resultEl.textContent = 'Нет. Этот пароль легко угадать или перебрать.';
        resultEl.className = 'quiz-result bad';
        checked.closest('.quiz-option').classList.add('wrong');
        codeEl.style.display = 'none';
      }
    });

    // ---------- Уровень 2: шифр ----------
    document.querySelector('[data-check="q2"]').addEventListener('click', () => {
      const inputRaw = document.getElementById('q2-input').value.trim();
      const resultEl = document.getElementById('quiz2-result');
      const codeEl = document.getElementById('code2');

      // исходный незашифрованный текст
      const expected = 'БЕРЕГИ СВОЙ ПАРОЛЬ И НИКОМУ ЕГО НЕ СООБЩАЙ';

      if (!inputRaw){
        resultEl.textContent = 'Введи расшифровку.';
        resultEl.className = 'quiz-result bad';
        codeEl.style.display = 'none';
        return;
      }

      // нормализуем регистр и пробелы для сравнения
      const normalize = (s) => s
        .replace(/\s+/g,' ')
        .trim()
        .toUpperCase();

      if (normalize(inputRaw) === normalize(expected)) {
        resultEl.textContent = 'Отлично. Ты реально снял(а) сдвиг.';
        resultEl.className = 'quiz-result good';
        codeEl.style.display = 'block';
      } else {
        resultEl.textContent = 'Не совсем. Подумай: каждую букву надо отодвинуть НАЗАД на 3. В тексте есть слово «ПАРОЛЬ».';
        resultEl.className = 'quiz-result bad';
        codeEl.style.display = 'none';
      }
    });

    // ---------- Уровень 3: фишинг ----------
    document.querySelector('[data-check="q3"]').addEventListener('click', () => {
      const boxes = document.querySelectorAll('#quiz3 input[type="checkbox"]');
      const resultEl = document.getElementById('quiz3-result');
      const codeEl = document.getElementById('code3');

      // правильные: panic, askpass, lang
      const correctSet = ['panic','askpass','lang'];
      const chosen = Array.from(boxes).filter(b => b.checked).map(b => b.value);

      // оформление сброс
      document.querySelectorAll('#quiz3 .quiz-option').forEach(o => {
        o.classList.remove('correct','wrong');
      });

      // подсветка выбранного
      chosen.forEach(val => {
        const opt = Array.from(document.querySelectorAll('#quiz3 .quiz-option')).find(o => o.querySelector('input').value === val);
        if (opt){
          if (correctSet.includes(val)) {
            opt.classList.add('correct');
          } else {
            opt.classList.add('wrong');
          }
        }
      });

      // логика проверки
      const isCorrect = chosen.length === correctSet.length && correctSet.every(v => chosen.includes(v));

      if (isCorrect) {
        resultEl.textContent = 'Да. Это фишинг. Давят временем, требуют пароль, пишут агрессивно.';
        resultEl.className = 'quiz-result good';
        codeEl.style.display = 'block';
      } else {
        resultEl.textContent = 'Не всё отметила правильно. Нормальные админы НЕ просят пароль по ссылке.';
        resultEl.className = 'quiz-result bad';
        codeEl.style.display = 'none';
      }
    });

    // ---------- Финал ----------
    document.getElementById('final-check').addEventListener('click', () => {
      const input = document.getElementById('final-input').value.trim();
      const resultEl = document.getElementById('final-result');

      if (!input){
        resultEl.textContent = 'Введи код в формате 7-5-3';
        resultEl.className = 'quiz-result bad';
        return;
      }

      if (input === '7-5-3') {
        resultEl.textContent = 'Сейф открыт. Данные спасены. Миссия выполнена 🎉';
        resultEl.className = 'quiz-result good';
      } else {
        resultEl.textContent = 'Код неверный. Проверь пароли / шифр / письмо.';
        resultEl.className = 'quiz-result bad';
      }
    });
  </script>
</body>
</html>
